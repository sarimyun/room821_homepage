{"ast":null,"code":"import { isClockSkewError } from './isClockSkewError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Get retry decider function\n * @param errorParser Function to load JavaScript error from HTTP response\n */\nconst getRetryDecider = errorParser => async (response, error) => {\n  var _ref;\n  const parsedError = (_ref = error !== null && error !== void 0 ? error : await errorParser(response)) !== null && _ref !== void 0 ? _ref : undefined;\n  const errorCode = parsedError === null || parsedError === void 0 ? void 0 : parsedError['code'];\n  const statusCode = response === null || response === void 0 ? void 0 : response.statusCode;\n  return isConnectionError(error) || isThrottlingError(statusCode, errorCode) || isClockSkewError(errorCode) || isServerSideError(statusCode, errorCode);\n};\n// reference: https://github.com/aws/aws-sdk-js-v3/blob/ab0e7be36e7e7f8a0c04834357aaad643c7912c3/packages/service-error-classification/src/constants.ts#L22-L37\nconst THROTTLING_ERROR_CODES = ['BandwidthLimitExceeded', 'EC2ThrottledException', 'LimitExceededException', 'PriorRequestNotComplete', 'ProvisionedThroughputExceededException', 'RequestLimitExceeded', 'RequestThrottled', 'RequestThrottledException', 'SlowDown', 'ThrottledException', 'Throttling', 'ThrottlingException', 'TooManyRequestsException'];\nconst TIMEOUT_ERROR_CODES = ['TimeoutError', 'RequestTimeout', 'RequestTimeoutException'];\nconst isThrottlingError = (statusCode, errorCode) => statusCode === 429 || !!errorCode && THROTTLING_ERROR_CODES.includes(errorCode);\nconst isConnectionError = error => (error === null || error === void 0 ? void 0 : error['name']) === 'Network error';\nconst isServerSideError = (statusCode, errorCode) => !!statusCode && [500, 502, 503, 504].includes(statusCode) || !!errorCode && TIMEOUT_ERROR_CODES.includes(errorCode);\nexport { getRetryDecider };","map":{"version":3,"names":["getRetryDecider","errorParser","response","error","_ref","parsedError","undefined","errorCode","statusCode","isConnectionError","isThrottlingError","isClockSkewError","isServerSideError","THROTTLING_ERROR_CODES","TIMEOUT_ERROR_CODES","includes"],"sources":["/Users/sarimyun/react-native-app/room821_homepage/room821_homepage/node_modules/@aws-amplify/core/src/clients/middleware/retry/defaultRetryDecider.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { isClockSkewError } from './isClockSkewError';\n/**\n * Get retry decider function\n * @param errorParser Function to load JavaScript error from HTTP response\n */\nexport const getRetryDecider = (errorParser) => async (response, error) => {\n    const parsedError = error ??\n        (await errorParser(response)) ??\n        undefined;\n    const errorCode = parsedError?.['code'];\n    const statusCode = response?.statusCode;\n    return (isConnectionError(error) ||\n        isThrottlingError(statusCode, errorCode) ||\n        isClockSkewError(errorCode) ||\n        isServerSideError(statusCode, errorCode));\n};\n// reference: https://github.com/aws/aws-sdk-js-v3/blob/ab0e7be36e7e7f8a0c04834357aaad643c7912c3/packages/service-error-classification/src/constants.ts#L22-L37\nconst THROTTLING_ERROR_CODES = [\n    'BandwidthLimitExceeded',\n    'EC2ThrottledException',\n    'LimitExceededException',\n    'PriorRequestNotComplete',\n    'ProvisionedThroughputExceededException',\n    'RequestLimitExceeded',\n    'RequestThrottled',\n    'RequestThrottledException',\n    'SlowDown',\n    'ThrottledException',\n    'Throttling',\n    'ThrottlingException',\n    'TooManyRequestsException',\n];\nconst TIMEOUT_ERROR_CODES = [\n    'TimeoutError',\n    'RequestTimeout',\n    'RequestTimeoutException',\n];\nconst isThrottlingError = (statusCode, errorCode) => statusCode === 429 ||\n    (!!errorCode && THROTTLING_ERROR_CODES.includes(errorCode));\nconst isConnectionError = (error) => error?.['name'] === 'Network error';\nconst isServerSideError = (statusCode, errorCode) => (!!statusCode && [500, 502, 503, 504].includes(statusCode)) ||\n    (!!errorCode && TIMEOUT_ERROR_CODES.includes(errorCode));\n"],"mappings":";;AAAA;AACA;AAEA;AACA;AACA;AACA;AACY,MAACA,eAAe,GAAIC,WAAW,IAAK,OAAOC,QAAQ,EAAEC,KAAK,KAAK;EAAA,IAAAC,IAAA;EACvE,MAAMC,WAAW,IAAAD,IAAA,GAAGD,KAAK,aAALA,KAAK,cAALA,KAAK,GACpB,MAAMF,WAAW,CAACC,QAAQ,CAAC,cAAAE,IAAA,cAAAA,IAAA,GAC5BE,SAAS;EACb,MAAMC,SAAS,GAAGF,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAG,MAAM,CAAC;EACvC,MAAMG,UAAU,GAAGN,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEM,UAAU;EACvC,OAAQC,iBAAiB,CAACN,KAAK,CAAC,IAC5BO,iBAAiB,CAACF,UAAU,EAAED,SAAS,CAAC,IACxCI,gBAAgB,CAACJ,SAAS,CAAC,IAC3BK,iBAAiB,CAACJ,UAAU,EAAED,SAAS,CAAC;AAChD;AACA;AACA,MAAMM,sBAAsB,GAAG,CAC3B,wBAAwB,EACxB,uBAAuB,EACvB,wBAAwB,EACxB,yBAAyB,EACzB,wCAAwC,EACxC,sBAAsB,EACtB,kBAAkB,EAClB,2BAA2B,EAC3B,UAAU,EACV,oBAAoB,EACpB,YAAY,EACZ,qBAAqB,EACrB,0BAA0B,CAC7B;AACD,MAAMC,mBAAmB,GAAG,CACxB,cAAc,EACd,gBAAgB,EAChB,yBAAyB,CAC5B;AACD,MAAMJ,iBAAiB,GAAGA,CAACF,UAAU,EAAED,SAAS,KAAKC,UAAU,KAAK,GAAG,IAClE,CAAC,CAACD,SAAS,IAAIM,sBAAsB,CAACE,QAAQ,CAACR,SAAS,CAAE;AAC/D,MAAME,iBAAiB,GAAIN,KAAK,IAAK,CAAAA,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAG,MAAM,CAAC,MAAK,eAAe;AACxE,MAAMS,iBAAiB,GAAGA,CAACJ,UAAU,EAAED,SAAS,KAAM,CAAC,CAACC,UAAU,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAACO,QAAQ,CAACP,UAAU,CAAC,IAC1G,CAAC,CAACD,SAAS,IAAIO,mBAAmB,CAACC,QAAQ,CAACR,SAAS,CAAE"},"metadata":{},"sourceType":"module","externalDependencies":[]}